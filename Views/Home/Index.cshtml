@{
    ViewBag.Title = "Home Page";
}
@{


    if (Session["urserrole"] == null)
    {
        <div class="card text-center  mt-100 nav-item" style="margin-top:20px;">
            <div class="card-header bg-primary text-white  ">WELCOME -@Session["usernames"],<br /><i class="fa-solid fa-envelope-circle-check"></i>   @HttpContext.Current.User.Identity.Name</div>

            <div class="card-header bg-warning text-white  ">WARNING</div>
            <div class="card-body">
                <h5 class="card-title ">

                    <i class="fa-solid fa-triangle-exclamation fa-4x"></i>

                </h5>

            </div>
            <div class="card-footer text-muted bg-warning ">
                <a href="#" class="btn btn-outline-primary text-black">
                    Current user Has NO ROLE. <span> <strong>  <em class="text-danger">Kindly ask your supervisor to assign you a role</em></strong></span>
                </a>
            </div>
        </div>
    }
    else if (Session["urserrole"].Equals(2) || Session["urserrole"].Equals(1))
    {
        //only for admin
        if (Session["urserrole"].Equals(2))
        {


            <div class="row">
                <div class="col-md-12 grid-margin">
                    <div class="row">
                        <div class="col-12 col-xl-8 mb-4 mb-xl-0">
                            <h3 class="font-weight-bold">Welcome  @Session["usernames"]</h3>
                            <h6 class="font-weight-normal mb-0">
                                <i class="fa-solid fa-envelope-circle-check"></i>
                                <span class="text-primary">@HttpContext.Current.User.Identity.Name</span>
                            </h6>
                        </div>

                    </div>
                </div>
            </div>


            <div class="row">
                <div class="col-md-12 grid-margin stretch-card">
                    <div class="card position-relative">
                        <div class="card-body">
                            <div id="detailedReports" class="carousel slide detailed-report-carousel position-static pt-2" data-ride="carousel">
                                <div class="carousel-inner">
                                    <div class="carousel-item active">
                                        <div class="row">
                                            <div class="col-md-12 col-xl-3 d-flex flex-column justify-content-start">
                                                <div class="ml-xl-4 mt-3">
                                                    <p class="card-title">Activity summary</p>
                                                    <img src="~/App_Start/images/activities/dash.jpg" class="img-fluid" style="width:80%" />

                                                    <h3 class="font-weight-500 mb-xl-4 text-primary">TASK MANAGEMENT </h3>
                                                    <p class="mb-2 mb-xl-0">Task management is the process of monitoring your project's tasks through their various stages from start to finish</p>
                                                </div>
                                            </div>
                                            <div class="col-md-12 col-xl-9">
                                                <div class="row">
                                                    <div class="col-md-6 border-right">
                                                        <div class="table-responsive mb-3 mb-md-0 mt-3">
                                                            <table class="table table-borderless report-table">
                                                                <tr>
                                                                    <td class="text-muted">all users</td>
                                                                    <td class="w-100 px-0">
                                                                        <div class="progress progress-md mx-4">
                                                                            <div class="progress-bar bg-primary" role="progressbar" style="width: @Convert.ToInt32(Session["allusers"])%" aria-valuenow="@Convert.ToInt32(Session["allusers"])" aria-valuemin="0" aria-valuemax="100"></div>
                                                                        </div>
                                                                    </td>
                                                                    <td><h5 class="font-weight-bold mb-0">@Convert.ToInt32(Session["allusers"])</h5></td>
                                                                </tr>
                                                                <tr>
                                                                    <td class="text-muted">all tasks</td>
                                                                    <td class="w-100 px-0">
                                                                        <div class="progress progress-md mx-4">
                                                                            <div class="progress-bar bg-warning" role="progressbar" style="width: @Convert.ToInt32(Session["alltasks"])%" aria-valuenow="@Convert.ToInt32(Session["alltasks"])" aria-valuemin="0" aria-valuemax="100"></div>
                                                                        </div>
                                                                    </td>
                                                                    <td><h5 class="font-weight-bold mb-0">@Convert.ToInt32(Session["alltasks"])</h5></td>
                                                                </tr>
                                                                <tr>
                                                                    <td class="text-muted">Completed tasks</td>
                                                                    <td class="w-100 px-0">
                                                                        <div class="progress progress-md mx-4">
                                                                            <div class="progress-bar bg-danger" role="progressbar" style="width: @Convert.ToInt32(Session["admincompleted"])%" aria-valuenow="@Convert.ToInt32(Session["admincompleted"])" aria-valuemin="0" aria-valuemax="100"></div>
                                                                        </div>
                                                                    </td>
                                                                    <td><h5 class="font-weight-bold mb-0">@Convert.ToInt32(Session["admincompleted"])</h5></td>
                                                                </tr>
                                                                <tr>
                                                                    <td class="text-muted">incomplete Tasks</td>
                                                                    <td class="w-100 px-0">
                                                                        <div class="progress progress-md mx-4">
                                                                            <div class="progress-bar bg-info" role="progressbar" style="width: @Convert.ToInt32(Session["adminincompleted"])%" aria-valuenow="@Convert.ToInt32(Session["adminincompleted"])" aria-valuemin="0" aria-valuemax="100"></div>
                                                                        </div>
                                                                    </td>
                                                                    <td><h5 class="font-weight-bold mb-0">@Convert.ToInt32(Session["adminincompleted"])</h5></td>
                                                                </tr>
                                                                <tr>
                                                                    <td class="text-muted">Addittional tasks</td>
                                                                    <td class="w-100 px-0">
                                                                        <div class="progress progress-md mx-4">
                                                                            <div class="progress-bar bg-primary" role="progressbar" style="width: @Convert.ToInt32(Session["admincadditional"])%" aria-valuenow=" @Convert.ToInt32(Session["admincadditional"])" aria-valuemin="0" aria-valuemax="100"></div>
                                                                        </div>
                                                                    </td>
                                                                    <td><h5 class="font-weight-bold mb-0"> @Convert.ToInt32(Session["admincadditional"])</h5></td>
                                                                </tr>
                                                                <tr>
                                                                    <td class="text-muted">submitted reports</td>
                                                                    <td class="w-100 px-0">
                                                                        <div class="progress progress-md mx-4">
                                                                            <div class="progress-bar bg-danger" role="progressbar" style="width: @Convert.ToInt32(Session["allreports"])%" aria-valuenow="@Convert.ToInt32(Session["allreports"])%" aria-valuemin="0" aria-valuemax="100"></div>
                                                                        </div>
                                                                    </td>
                                                                    <td><h5 class="font-weight-bold mb-0"> @Convert.ToInt32(Session["allreports"])</h5></td>
                                                                </tr>
                                                            </table>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-6 mt-10">

                                                        <div id="donutchart1" style="width:100%; height:100%;"></div>

                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                                <a class="carousel-control-prev" href="#detailedReports" role="button" data-slide="prev">
                                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                    <span class="sr-only">Previous</span>
                                </a>
                                <a class="carousel-control-next" href="#detailedReports" role="button" data-slide="next">
                                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                    <span class="sr-only">Next</span>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        }


        <div class="row">
            <div class="col-md-4 stretch-card grid-margin">
                <div class="card">
                    <div class="card-body">
                        <p class="card-title mb-0">Personal statistics</p>
                        <div id="donutchart" style="width: 100%; height: 100%;"></div>

                    </div>
                </div>
            </div>

            <div class="col-md-4 stretch-card grid-margin">
                <div class="row">
                    <div class="col-md-12 grid-margin stretch-card">
                        <div class="card">
                            <div class="card-body">
                                <p class="card-title">Personal performance</p>
                                <div class="charts-data">
                                    <div class="mt-3">
                                        <p class="mb-0">My Total Tasks</p>
                                        <div class="d-flex justify-content-between align-items-center">
                                            <div class="progress progress-md flex-grow-1 mr-4">
                                                <div class="progress-bar bg-inf0" role="progressbar" style="width: @Convert.ToInt32(Session["mytotaltasks"])%" aria-valuenow="@Convert.ToInt32(Session["mytotaltasks"])" aria-valuemin="0" aria-valuemax="100"></div>
                                            </div>
                                            <p class="mb-0">@Convert.ToInt32(Session["mytotaltasks"])</p>
                                        </div>
                                    </div>
                                    <div class="mt-3">
                                        <p class="mb-0">Incomplete Tasks</p>
                                        <div class="d-flex justify-content-between align-items-center">
                                            <div class="progress progress-md flex-grow-1 mr-4">
                                                <div class="progress-bar bg-info" role="progressbar" style="width:@Convert.ToInt32(Session["myincompletetasks"])%" aria-valuenow="@Convert.ToInt32(Session["myincompletetasks"])" aria-valuemin="0" aria-valuemax="100"></div>
                                            </div>
                                            <p class="mb-0">@Convert.ToInt32(Session["myincompletetasks"])</p>
                                        </div>
                                    </div>
                                    <div class="mt-3">
                                        <p class="mb-0">Completed Tasks</p>
                                        <div class="d-flex justify-content-between align-items-center">
                                            <div class="progress progress-md flex-grow-1 mr-4">
                                                <div class="progress-bar bg-info" role="progressbar" style="width: @Convert.ToInt32(Session["mycompletetasks"])%" aria-valuenow="@Convert.ToInt32(Session["mycompletetasks"])" aria-valuemin="0" aria-valuemax="100"></div>
                                            </div>
                                            <p class="mb-0">@Convert.ToInt32(Session["mycompletetasks"])</p>
                                        </div>
                                    </div>
                                    <div class="mt-3">
                                        <p class="mb-0">My Additioal tasks </p>
                                        <div class="d-flex justify-content-between align-items-center">
                                            <div class="progress progress-md flex-grow-1 mr-4">
                                                <div class="progress-bar bg-info" role="progressbar" style="width: @Convert.ToInt32(Session["myToDotasks"] )%" aria-valuenow="@Convert.ToInt32(Session["myToDotasks"] )" aria-valuemin="0" aria-valuemax="100"></div>
                                            </div>
                                            <p class="mb-0">@Convert.ToInt32(Session["myToDotasks"])</p>
                                        </div>
                                    </div>
                                    <div class="mt-3">
                                        <p class="mb-0">submitted reports </p>
                                        <div class="d-flex justify-content-between align-items-center">
                                            <div class="progress progress-md flex-grow-1 mr-4">
                                                <div class="progress-bar bg-info" role="progressbar" style="width: @Convert.ToInt32(Session["myreports"])%" aria-valuenow="@Convert.ToInt32(Session["myreports"])" aria-valuemin="0" aria-valuemax="100"></div>
                                            </div>
                                            <p class="mb-0">@Convert.ToInt32(Session["myreports"])</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-12 stretch-card grid-margin grid-margin-md-0">
                        <div class="card data-icon-card-primary">
                            <div class="card-body">
                                <p class="card-title text-white">User Details</p>
                                <div class="row">
                                    <div class="col-8 text-white">
                                        <hr>
                                        <div class="text-white font-weight-500 mb-0">
                                            <i class="fa-solid fa-user-tie menu-icon fa-2x p-2"> </i> @Session["username"]

                                        </div>


                                        <div class="text-white font-weight-500 mb-0">
                                            <i class="fa-solid fa-envelope menu-icon fa-2x p-2"></i>  @HttpContext.Current.User.Identity.Name

                                        </div>
                                    </div>
                                    @*<div class="col-4 background-icon">

                                        </div>*@
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-4 stretch-card grid-margin">
                <div class="card">
                    <div class="card-body">
                        <p class="card-title"><hr /></p>
                        <div class="ml-xl-4 mt-3">
                            <p class="card-title"></p>
                            <img src="~/App_Start/images/activities/todo.jpg" class="img-fluid" style="width:100%" />


                        </div>
                    </div>
                </div>
            </div>
        </div>


    }
    <script type="text/javascript">
                                    google.charts.load("current", { packages: ["corechart"] });
                                    google.charts.setOnLoadCallback(drawChart);
                            function drawChart() {
                                var data = google.visualization.arrayToDataTable([
                                    ['Activitiy', 'values'],
                                    ['Users', @Convert.ToInt32(Session["allusers"])],
                                    ['All tasks', @Convert.ToInt32(Session["alltasks"])],
                                    ['All completed',@Convert.ToInt32(Session["admincompleted"])],
                                    ['All Incompleted', @Convert.ToInt32(Session["adminincompleted"])],
                                    ['All additionaltasks', @Convert.ToInt32(Session["admincadditional"])],
                                    ['Available roles ', @Convert.ToInt32(Session["allroles"])],
                                    ['All reports ', @Convert.ToInt32(Session["allreports"])],
                                ]);

                                var options = {
                                    title: 'GENERAL STATISTICS',
                                    pieHole: 0.4,
                                    responsive: true,
                                    'legend': 'bottom',
                                };

                                var chart = new google.visualization.PieChart(document.getElementById('donutchart1'));
                                chart.draw(data, options);
                            }
    </script>



    <script type="text/javascript">
                            google.charts.load("current", { packages: ["corechart"] });
                            google.charts.setOnLoadCallback(drawChart);
                            function drawChart() {
                                var data = google.visualization.arrayToDataTable([
                                    ['Tasks', 'values'],
                                    ['Tasks', @Convert.ToInt32(Session["mytotaltasks"])],
                                    ['Incomplete', @Convert.ToInt32(Session["myincompletetasks"])],
                                    ['complete', @Convert.ToInt32(Session["mycompletetasks"])],
                                    ['Added tasks', @Convert.ToInt32(Session["myToDotasks"])],
                                    ['My reports', @Convert.ToInt32(Session["myreports"])],
                                ]);

                                var options = {
                                    title: 'Task Activity',
                                    pieHole: 0.4,
                                    'legend': 'bottom',
                                };

                                var chart = new google.visualization.PieChart(document.getElementById('donutchart'));
                                chart.draw(data, options);
                            }
    </script>
}












